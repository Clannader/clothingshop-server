(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-acd3b0e6"],{6800:function(e,t,a){"use strict";a.r(t),a("7db0"),a("d3b7");var s=a("5530"),n=a("b775"),o={name:"UserLogs",data:function(){var e={cond:void 0,startDate:void 0,endDate:void 0,type:"ALL"};return{tableData:[],tableY:230,offset:1,pageSize:10,loading:!1,queryParams:e,queryParamsCopy:e,tableTotal:0,children:"",isSelect:{}}},created:function(){this.doSearch()},methods:{doSearch:function(){var e,t=this;this.loading=!0,this.publicMethods.compareObjects(this.queryParamsCopy,this.queryParams)||(this.offset=1),(e=Object(s.a)(Object(s.a)({},this.queryParams),{},{offset:this.offset,pageSize:this.pageSize}),n.a.get("/api/logs/user/search",{params:e})).then((function(e){t.tableData=e.logs,t.tableTotal=e.total})).catch((function(){t.tableData=[],t.tableTotal=0})).finally((function(){t.loading=!1,t.tableData.find((function(e){return t.isSelect._id===e._id}))||(t.isSelect={}),t.queryParamsCopy=Object.assign({},t.queryParams)}))},initDoSearh:function(){},goBack:function(){this.$router.back(-1)},onResize:function(){this.tableY=window.innerHeight-427-70},rowClass:function(e){if(e._id===this.isSelect._id)return"rowSelected"},rowClick:function(e){var t=this;return{on:{click:function(){t.selectedRow(e)},dblclick:function(){t.viewLogs(e)}}}},selectedRow:function(e){this.isSelect=e},viewLogs:function(e){}},computed:{tableColumns:{get:function(){return[{title:"".concat(this.$t("users.shopId")),width:100,dataIndex:"shopId"},{title:"".concat(this.$t("users.adminName")),width:150,dataIndex:"userName"},{title:"".concat(this.$t("logs.contents")),ellipsis:!0,dataIndex:"content"},{title:"".concat(this.$t("logs.date")),dataIndex:"date",width:180,scopedSlots:{customRender:"logDate"}},{title:"".concat(this.$t("logs.logType")),dataIndex:"type",width:120},{title:"".concat(this.$t("logs.requestIP")),dataIndex:"requestIP",width:120},{title:"".concat(this.$t("homePage.operation")),dataIndex:"",key:"action",fixed:"right",scopedSlots:{customRender:"action"},width:60,align:"center"}]}},logTypeItem:{get:function(){return[{code:"ALL",desc:"".concat(this.$t("logs.allType"))},{code:"ServerLog",desc:"".concat(this.$t("logs.serverType"))},{code:"Right",desc:"".concat(this.$t("logs.rightType"))}]}}}},i=(a("7b9ed"),a("2877")),r=Object(i.a)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"card-title"},[a("v-container",{staticClass:"card-container",attrs:{fluid:""}},[a("div",{staticClass:"form-group"},[a("div",{staticClass:"group-item"},[a("v-text-field",{attrs:{label:e.$t("users.searchCond")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.queryParams.cond,callback:function(t){e.$set(e.queryParams,"cond",t)},expression:"queryParams.cond"}})],1),a("div",{staticClass:"group-item"},[a("app-date-picker",{attrs:{label:e.$t("logs.startDate"),max:e.queryParams.endDate,"update-value":e.queryParams.startDate,"close-on-content-click":!1,readonly:"",clearable:""},on:{"update:updateValue":function(t){return e.$set(e.queryParams,"startDate",t)},"update:update-value":function(t){return e.$set(e.queryParams,"startDate",t)}}})],1),a("div",{staticClass:"group-item"},[a("app-date-picker",{attrs:{label:e.$t("logs.endDate"),min:e.queryParams.startDate,"update-value":e.queryParams.endDate,"close-on-content-click":!1,readonly:"",clearable:""},on:{"update:updateValue":function(t){return e.$set(e.queryParams,"endDate",t)},"update:update-value":function(t){return e.$set(e.queryParams,"endDate",t)}}})],1),a("div",{staticClass:"group-item"},[a("v-select",{attrs:{items:e.logTypeItem,"item-value":"code","item-text":"desc",label:e.$t("logs.logType")},on:{change:e.doSearch},model:{value:e.queryParams.type,callback:function(t){e.$set(e.queryParams,"type",t)},expression:"queryParams.type"}})],1)]),a("div",{staticClass:"form-group"},[a("div",{staticClass:"group-item"},[a("v-text-field",{attrs:{label:e.$t("logs.queryShop")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.queryParams.shopId,callback:function(t){e.$set(e.queryParams,"shopId",t)},expression:"queryParams.shopId"}})],1),a("div",{staticClass:"group-item"},[a("v-text-field",{attrs:{label:e.$t("logs.queryUserID")},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.doSearch(t)}},model:{value:e.queryParams.adminId,callback:function(t){e.$set(e.queryParams,"adminId",t)},expression:"queryParams.adminId"}})],1),a("v-spacer"),a("div",{staticClass:"card-search-btn"},[a("v-btn",{attrs:{rounded:"",dark:""},on:{click:function(t){return e.doSearch()}}},[e._v(" "+e._s(e.$t("homePage.search"))+" ")])],1)],1)])],1),a("v-card",{directives:[{name:"resize",rawName:"v-resize",value:e.onResize,expression:"onResize"}],staticClass:"card-body"},[a("app-table",{attrs:{columns:e.tableColumns,dataSource:e.tableData,rowKey:function(e){return e._id},loading:e.loading,total:e.tableTotal,scroll:{x:1e3,y:e.tableY},rowClassName:e.rowClass,customRow:e.rowClick,offset:e.offset,pageSize:e.pageSize},on:{change:e.doSearch,"update:offset":function(t){e.offset=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}},scopedSlots:e._u([{key:"logDate",fn:function(t){var s=t.record;return[a("div",{staticClass:"text-ellipsis"},[e._v(" "+e._s(s.format("YYYY-MM-DD HH:mm:ss"))+" ")])]}},{key:"action",fn:function(t){var s=t.record;return[a("v-menu",{attrs:{bottom:"",left:"",transition:"slide-y-transition"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({attrs:{icon:"",small:""},on:{click:function(t){return e.selectedRow(s)}}},n),[a("v-icon",{staticStyle:{color:"#0055b8"}},[e._v(" more_vert ")])],1)]}}],null,!0)},[a("v-list",{staticClass:"option-menu-list"},[a("v-list-item",{on:{click:function(t){return e.viewLogs(s)}}},[a("i",{staticClass:"material-icons remove_red_eye"}),a("v-list-item-title",[e._v(" "+e._s(e.$t("logs.view"))+" ")])],1)],1)],1)]}}])})],1),a("div",{staticClass:"card-bottom card-round-btn"},[a("v-btn",{attrs:{rounded:""},on:{click:function(t){return e.goBack()}}},[e._v(e._s(e.$t("homePage.goback")))])],1)],1)}),[],!1,null,"9ed918ee",null);t.default=r.exports},"7b9ed":function(e,t,a){"use strict";a("d3c1")},d3c1:function(e,t,a){}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-8cded0aa"],{"0f6b":function(t,e,i){"use strict";i("e985")},2033:function(t,e,i){},8503:function(t,e,i){"use strict";i.r(e),i("7db0"),i("d3b7");var o=i("b775");i("b64b"),i("a15b"),i("ac1f"),i("1276");var s={name:"RightsSelectDialog",data:function(){return{rightsCode:[],tableData:[],loading:!1,tableTotal:0,tableY:230}},props:{rightsCodeParams:{type:String,default:""}},created:function(){this.rightsCode=this.publicMethods.isEmpty(this.rightsCodeParams)?[]:this.rightsCodeParams.split(","),this.doSearch()},methods:{close:function(){this.$emit("closeDialog")},action:function(){this.$emit("closeDialog",this.rightsCode.join(","))},doSearch:function(){var t,e=this;this.loading=!0,(t={},o.a.post("/api/rights/getRightsCode",t)).then((function(t){e.tableData=t.rightsCode,e.tableTotal=t.rightsCode.length})).catch((function(){e.tableData=[],e.tableTotal=0})).finally((function(){e.loading=!1}))},onResize:function(){this.tableY=window.innerHeight-330},onSelectChange:function(t){this.rightsCode=t}},computed:{tableColumns:{get:function(){return[{title:"".concat(this.$t("rights.rightsCodes")),width:150,dataIndex:"code"},{title:"".concat(this.$t("rights.groupDesc")),dataIndex:"desc"}]}}}},a=(i("e9a7"),i("2877")),n=Object(a.a)(s,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-dialog",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],attrs:{visible:!0,title:t.$t("rights.selectGroup")}},[i("template",{slot:"dialogContent"},[i("div",{staticClass:"pd-lr-12 form-group"},[i("div",{staticClass:"group-item",attrs:{title:t.rightsCode.join(",")}},[i("v-text-field",{attrs:{label:t.$t("rights.selectedRightsCodes"),disabled:""},model:{value:t.rightsCode,callback:function(e){t.rightsCode=e},expression:"rightsCode"}})],1),i("v-spacer"),i("div",{staticClass:"card-search-btn"},[i("v-btn",{attrs:{rounded:"",dark:""},on:{click:function(e){return t.doSearch()}}},[t._v(" "+t._s(t.$t("homePage.search"))+" ")])],1)],1),i("app-table",{attrs:{columns:t.tableColumns,dataSource:t.tableData,rowKey:function(t){return t.code},loading:t.loading,total:t.tableTotal,scroll:{x:300,y:t.tableY},pagination:!1,"row-selection":{selectedRowKeys:t.rightsCode,onChange:t.onSelectChange}},on:{change:t.doSearch}})],1),i("template",{slot:"dialogBtn"},[i("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.action()}}},[t._v(t._s(t.$t("homePage.confirm")))]),i("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.close()}}},[t._v(t._s(t.$t("homePage.colse")))])],1)],2)}),[],!1,null,"6f75881a",null).exports,r={name:"RightsDetails",data:function(){var t=this;return{title:"",isNew:!1,rightsSchema:{groupName:void 0,desc:void 0,rightsCode:void 0,id:void 0},visible:!0,valid:!0,groupNameRules:[function(e){return!!e||"".concat(t.$t("rights.inputGroupName"))},function(e){return/^[A-Za-z]+$/.test(e)||"".concat(t.$t("rights.errorGroupName"))}],rightsCodeRules:[function(e){return!!e||"".concat(t.$t("rights.inputRightsCode"))},function(e){return/^(\-?([1-9]{1}\d{3}|[A-Za-z]{2,15}),)*(?=(\-?([1-9]{1}\d{3}|[A-Za-z]{2,15}))$)/.test(e)||"".concat(t.$t("rights.errorRightsCode"))}],children:""}},props:{recordScheam:{type:Object,default:function(){return{}}}},created:function(){this.isNew=0===Object.keys(this.recordScheam).length,this.isNew?this.title=this.$t("rights.createGroup"):(this.rightsSchema=this.recordScheam,this.title=this.$t("rights.modifyGroup",{name:this.rightsSchema.groupName}))},methods:{close:function(){this.$emit("closeDialog")},action:function(){this.$refs.form.validate()&&this.saveRightsCode()},saveRightsCode:function(){var t=this;this.isNew||(this.rightsSchema.id=this.rightsSchema._id),function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=arguments.length>1?arguments[1]:void 0;return o.a.post(t?"/api/rights/createRights":"/api/rights/modifyRights",e)}(this.isNew,this.rightsSchema).then((function(e){t.$toast.success(e.msg),t.close()})).catch((function(){})).finally((function(){}))},openRightsCode:function(){this.visible=!1,this.children=n},closeDialog:function(t){this.visible=!0,this.children="",this.publicMethods.isEmpty(t)||(this.rightsSchema.rightsCode=t)}}},c=Object(a.a)(r,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("app-dialog",{attrs:{visible:t.visible,title:t.title}},[i("template",{slot:"dialogContent"},[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{label:t.$t("rights.groupName"),rules:t.groupNameRules},model:{value:t.rightsSchema.groupName,callback:function(e){t.$set(t.rightsSchema,"groupName",e)},expression:"rightsSchema.groupName"}}),i("v-text-field",{attrs:{label:t.$t("rights.groupDesc")},model:{value:t.rightsSchema.desc,callback:function(e){t.$set(t.rightsSchema,"desc",e)},expression:"rightsSchema.desc"}}),i("v-text-field",{attrs:{label:t.$t("rights.rightsCodes"),rules:t.rightsCodeRules,"append-icon":"toc",readonly:""},on:{"click:append":function(e){return t.openRightsCode()}},model:{value:t.rightsSchema.rightsCode,callback:function(e){t.$set(t.rightsSchema,"rightsCode",e)},expression:"rightsSchema.rightsCode"}})],1)],1),i("template",{slot:"dialogBtn"},[i("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.action()}}},[t._v(t._s(t.$t("homePage.confirm")))]),i("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.close()}}},[t._v(t._s(t.$t("homePage.colse")))])],1)],2),i(t.children,{tag:"component",attrs:{rightsCodeParams:t.rightsSchema.rightsCode},on:{closeDialog:t.closeDialog}})],1)}),[],!1,null,"39d32b20",null).exports,l={name:"RightsDeleteDialog",data:function(){return{rightsSchema:{groupName:void 0}}},props:{recordScheam:{type:Object,default:function(){return{}}}},created:function(){this.rightsSchema=this.recordScheam},methods:{close:function(){this.$emit("closeDialog")},action:function(){var t,e=this;(t={id:this.rightsSchema._id},o.a.post("/api/rights/deleteRights",t)).then((function(){e.$toast.success(e.$t("homePage.deleteSuccess"))})).catch((function(){})).finally((function(){e.close()}))}}},h=(i("f2c5"),Object(a.a)(l,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("app-dialog",{attrs:{visible:!0,title:t.$t("rights.deleteGroup"),width:400}},[i("template",{slot:"dialogContent"},[i("div",{staticClass:"dialog-text"},[t._v(" "+t._s(t.$t("rights.confirmDelete",{name:t.rightsSchema.groupName}))+" ")])]),i("template",{slot:"dialogBtn"},[i("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.action()}}},[t._v(t._s(t.$t("homePage.confirm")))]),i("v-btn",{attrs:{depressed:""},on:{click:function(e){return t.close()}}},[t._v(t._s(t.$t("homePage.colse")))])],1)],2)}),[],!1,null,"096aab03",null).exports),d={name:"SettingsRights",created:function(){this.doSearch()},mounted:function(){},methods:{doSearch:function(){var t=this;this.loading=!0;var e=this.$refs.rightsTable,i=10,s=1;e&&(i=e.showPages,s=e.pageIndex),function(t){return o.a.post("/api/rights/getRightsList",t)}({groupName:this.groupName,offset:s,pageSize:i}).then((function(e){t.tableData=e.rights,t.tableTotal=e.total})).catch((function(){t.tableData=[],t.tableTotal=0})).finally((function(){t.loading=!1,t.tableData.find((function(e){return t.isSelect.groupName===e.groupName}))||(t.isSelect={})}))},openModify:function(t){var e,i=this;(e={id:t._id},o.a.post("/api/rights/findRightsById",e)).then((function(t){i.children=c,i.recordScheam=t.rights})).catch((function(){}))},initDoSearh:function(){var t=this.$refs.rightsTable;t&&(t.pageIndex=1),this.doSearch()},rowClass:function(t){if(t.groupName===this.isSelect.groupName)return"rowSelected"},rowClick:function(t){var e=this;return{on:{click:function(){e.selectedRow(t)},dblclick:function(){e.openModify(t)}}}},selectedRow:function(t){this.isSelect=t},openDelete:function(t){this.children=h,this.recordScheam={_id:t._id,groupName:t.groupName}},goBack:function(){this.$router.back(-1)},openCreate:function(){this.children=c,this.recordScheam={}},closeDialog:function(){this.children="",this.doSearch()},onResize:function(){this.tableY=window.innerHeight-427+34}},data:function(){return{tableData:[],loading:!1,groupName:void 0,tableTotal:0,children:"",recordScheam:void 0,tableY:230,isSelect:{}}},computed:{tableColumns:{get:function(){return[{title:"".concat(this.$t("rights.groupName")),width:150,fixed:"left",dataIndex:"groupName",isSelect:!1},{title:"".concat(this.$t("rights.groupDesc")),width:250,dataIndex:"desc",ellipsis:!0,scopedSlots:{customRender:"groupDesc"}},{title:"".concat(this.$t("rights.rightsCodes")),ellipsis:!0,dataIndex:"rightsCode"},{title:"".concat(this.$t("homePage.operation")),dataIndex:"",key:"action",fixed:"right",scopedSlots:{customRender:"action"},width:60,align:"center"}]}}}},u=(i("0f6b"),Object(a.a)(d,(function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",{staticClass:"card-title"},[i("v-container",{staticClass:"card-container",attrs:{fluid:""}},[i("div",{staticClass:"form-group"},[i("div",{staticClass:"group-item"},[i("v-text-field",{attrs:{label:t.$t("rights.searchName")},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.initDoSearh(e)}},model:{value:t.groupName,callback:function(e){t.groupName=e},expression:"groupName"}})],1),i("v-spacer"),i("div",{staticClass:"card-search-btn"},[i("v-btn",{attrs:{rounded:"",dark:""},on:{click:function(e){return t.doSearch()}}},[t._v(" "+t._s(t.$t("homePage.search"))+" ")])],1)],1)])],1),i("v-card",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"card-body"},[i("app-table",{ref:"rightsTable",attrs:{columns:t.tableColumns,dataSource:t.tableData,rowKey:function(t){return t._id},loading:t.loading,total:t.tableTotal,scroll:{x:1e3,y:t.tableY},rowClassName:t.rowClass,pagination:!1,customRow:t.rowClick},on:{change:t.doSearch},scopedSlots:t._u([{key:"groupDesc",fn:function(e){var o=e.record;return[i("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("div",t._g({staticClass:"text-ellipsis"},s),[t._v(" "+t._s(o)+" ")])]}}],null,!0)},[i("div",[t._v(t._s(o))])])]}},{key:"action",fn:function(e){var o=e.record;return[i("v-menu",{attrs:{bottom:"",left:"",transition:"slide-y-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var s=e.on;return[i("v-btn",t._g({attrs:{icon:"",small:""},on:{click:function(e){return t.selectedRow(o)}}},s),[i("v-icon",{staticStyle:{color:"#0055b8"}},[t._v(" more_vert ")])],1)]}}],null,!0)},[i("v-list",{staticClass:"option-menu-list"},[i("v-list-item",{on:{click:function(e){return t.openModify(o)}}},[i("i",{staticClass:"material-icons create"}),i("v-list-item-title",[t._v(" "+t._s(t.$t("homePage.modify"))+" ")])],1),i("v-list-item",{on:{click:function(e){return t.openDelete(o)}}},[i("i",{staticClass:"material-icons highlight_off"}),i("v-list-item-title",[t._v(" "+t._s(t.$t("homePage.delete"))+" ")])],1)],1)],1)]}}])})],1),i("div",{staticClass:"card-bottom card-round-btn"},[i("v-btn",{attrs:{rounded:""},on:{click:function(e){return t.openCreate()}}},[t._v(t._s(t.$t("homePage.create")))]),i("v-btn",{attrs:{rounded:""},on:{click:function(e){return t.goBack()}}},[t._v(t._s(t.$t("homePage.goback")))])],1),i(t.children,{tag:"component",attrs:{recordScheam:t.recordScheam},on:{closeDialog:t.closeDialog}})],1)}),[],!1,null,"9e5c04d4",null));e.default=u.exports},a15b:function(t,e,i){"use strict";var o=i("23e7"),s=i("44ad"),a=i("fc6a"),n=i("a640"),r=[].join,c=s!=Object,l=n("join",",");o({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(a(this),void 0===t?",":t)}})},a8f6:function(t,e,i){},e985:function(t,e,i){},e9a7:function(t,e,i){"use strict";i("a8f6")},f2c5:function(t,e,i){"use strict";i("2033")}}]);